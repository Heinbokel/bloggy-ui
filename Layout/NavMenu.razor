@using bloggy_ui.Services

<nav class="navbar navbar-expand-lg navbar-light bg-primary fixed-bottom">
    <div class="container">
        <ul class="navbar-nav mx-auto">
            <li class="nav-item">
                <a class="nav-link text-white" href="#">Home <i class="fas fa-home fa-xl"></i></a>
            </li>
            @if (IsLoggedIn)
            {
                <li class="nav-item">
                    <a class="nav-link text-white" href="/user-profile">My Profile <i class="fas fa-user-alt fa-xl"></i></a>
                </li>
            } else {
                <li class="nav-item">
                    <a class="nav-link text-white" href="/login">Login <i class="fas fa-user-alt fa-xl"></i></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/register">Sign Up <i class="fas fa-user-edit fa-xl"></i></a>
                </li>
            }

        </ul>
    </div>
</nav>


@code {
    [Inject]
    private AuthService _authService { get; set; }

    private bool IsLoggedIn { get; set; } = false;

    protected override void OnInitialized()
    {
        this._authService.GetUserInformationAsync().Subscribe((userInfo) =>
        {
            IsLoggedIn = userInfo != null;
            StateHasChanged();
        });
    }
}
